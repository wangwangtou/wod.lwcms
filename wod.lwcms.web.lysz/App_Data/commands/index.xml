<?xml version="1.0" encoding="utf-8" ?>
<commands>
  <multiCommand id="common">
    <commands>
      <assCommand id="ws">
        <typeName>wod.lwcms.services.ISiteService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getSite</methodName>
      </assCommand>
      <assCommand id="allCats">
        <typeName>wod.lwcms.services.ICategoryService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getAllCategories</methodName>
      </assCommand>
      <assCommand id="pageTransferName">
        <typeName>wod.lwcms.web.pageTransfer, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getCommonTransfer</methodName>
      </assCommand>
    </commands>
  </multiCommand>
  <multiCommand id="index" type="dataCommand">
    <commands>
      <assCommand id="ws">
        <typeName>wod.lwcms.services.ISiteService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getSite</methodName>
      </assCommand>
      <assCommand id="allCats">
        <typeName>wod.lwcms.services.ICategoryService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getAllCategories</methodName>
      </assCommand>
      <assCommand id="pageTransferName">
        <typeName>wod.lwcms.web.pageTransfer, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getIndexTransfer</methodName>
      </assCommand>
      <sqlCommand id="totalCount" paramenterPrefix=":" excuteType="scalar">
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    select count(1) from wod_lw_article where art_State = "pub"
    ]]>
        </sql>
      </sqlCommand>
      <assCommand id="startRowIndex">
        <typeName>wod.lwcms.dataaccess.pagerHelper, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getStartRowIndex</methodName>
      </assCommand>
      <assCommand id="endRowIndex">
        <typeName>wod.lwcms.dataaccess.pagerHelper, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getEndRowIndex</methodName>
      </assCommand>
      <sqlCommand id="pagedDr" paramenterPrefix=":" excuteType="datareader">
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    select top #endRowIndex ID,art_Name,art_Code,art_PreContent,art_Content,art_Page,art_SiteImage,art_ExtendData,cat_Path,art_Description,art_Keywords,art_CreateOn,art_ViewCount,art_Creater,art_State from wod_lw_article 
    where  art_State = "pub"
    order by art_CreateOn desc
    ]]>
        </sql>
      </sqlCommand>
      <assCommand id="articleList">
        <typeName>wod.lwcms.dataaccess.ICommonDataAccess, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>GetPagedArticle</methodName>
      </assCommand>
    </commands>
  </multiCommand>
  <multiCommand id="category">
    <commands>
      <assCommand id="ws">
        <typeName>wod.lwcms.services.ISiteService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getSite</methodName>
      </assCommand>
      <assCommand id="allCats">
        <typeName>wod.lwcms.services.ICategoryService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getAllCategories</methodName>
      </assCommand>
      <assCommand id="cat">
        <typeName>wod.lwcms.services.ICategoryService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getCurCategory</methodName>
      </assCommand>
      <assCommand id="pageTransferName">
        <typeName>wod.lwcms.web.pageTransfer, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getCategoryTransfer</methodName>
      </assCommand>
      <sqlCommand id="totalCount" paramenterPrefix=":" excuteType="scalar">
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    select count(1) from wod_lw_article 
    where cat_Path= :requestName and art_State = "pub"
    ]]>
        </sql>
      </sqlCommand>
      <assCommand id="startRowIndex">
        <typeName>wod.lwcms.dataaccess.pagerHelper, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getStartRowIndex</methodName>
      </assCommand>
      <assCommand id="endRowIndex">
        <typeName>wod.lwcms.dataaccess.pagerHelper, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getEndRowIndex</methodName>
      </assCommand>
      <sqlCommand id="pagedDr" paramenterPrefix=":" excuteType="datareader">
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    select top #endRowIndex ID,art_Name,art_Code,art_PreContent,art_Content,art_Page,art_SiteImage,art_ExtendData,cat_Path,art_Description,art_Keywords,art_CreateOn,art_ViewCount,art_Creater,art_State from wod_lw_article 
    where cat_Path = :categoryPath and art_State = "pub" order by art_CreateOn desc
    ]]>
        </sql>
      </sqlCommand>
      <assCommand id="articleList">
        <typeName>wod.lwcms.dataaccess.ICommonDataAccess, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>GetPagedArticle</methodName>
      </assCommand>
    </commands>
  </multiCommand>
  <multiCommand id="article">
    <commands>
      <assCommand id="ws">
        <typeName>wod.lwcms.services.ISiteService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getSite</methodName>
      </assCommand>
      <assCommand id="allCats">
        <typeName>wod.lwcms.services.ICategoryService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getAllCategories</methodName>
      </assCommand>
      <assCommand id="cat">
        <typeName>wod.lwcms.services.ICategoryService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getCurCategory</methodName>
      </assCommand>
      <sqlCommand id="singleDr" paramenterPrefix=":" excuteType="datareader">
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    select ID,art_Name,art_Code,art_PreContent,art_Content,art_SiteImage,art_ExtendData,art_Page,cat_Path,art_Description,art_Keywords,art_CreateOn,art_ViewCount,art_Creater,art_State from wod_lw_article 
    where cat_Path = :categoryPath and art_Code = :articleName and art_State = "pub"
    ]]>
        </sql>
      </sqlCommand>
      <assCommand id="art">
        <typeName>wod.lwcms.dataaccess.ICommonDataAccess, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>GetSingleArticle</methodName>
      </assCommand>
      <assCommand id="pageTransferName">
        <typeName>wod.lwcms.web.pageTransfer, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getArticleTransfer</methodName>
      </assCommand>
    </commands>
  </multiCommand>
  <multiCommand id="view">
    <!--查看了某文-->
    <commands>
      <assCommand id="checkParam">
        <typeName>wod.lwcms.services.IArticleService, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>checkViewArticleParam</methodName>
      </assCommand>
      <sqlCommand id="useraction" paramenterPrefix=":" excuteType="excute">
        <actfilter>@checkParam == true</actfilter>
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    insert into wod_lw_useraction (ID,art_ID,act_code,act_data,act_time)
    values (:lw_newid,:aid,'view_article',:lw_actData,:lw_now)
    ]]>
        </sql>
      </sqlCommand>
      <sqlCommand id="addviewcount" paramenterPrefix=":" excuteType="excute">
        <actfilter>@checkParam == true</actfilter>
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    update wod_lw_article
    set art_viewcount = art_viewcount + 1
    where ID = :aid
    ]]>
        </sql>
      </sqlCommand>
    </commands>
  </multiCommand>
  <multiCommand id="addcomment">
    <!--评论了某文-->
    <commands>
      <validCommand id="checkParam">
        <validation validType="IsNotNull" valueName="name" valueType="" errorMessage="名称不能为空" convertType=""></validation>
        <validation validType="IsEmail" valueName="email" valueType="" errorMessage="邮箱为空或非法" convertType=""></validation>
        <validation validType="IsStringLengthMatch" valueName="content" valueType="" errorMessage="内容长度必须在10-500之间" convertType="">
          <validParameter>10</validParameter>
          <validParameter>500</validParameter>
        </validation>
      </validCommand>
      <sqlCommand id="usercomment" paramenterPrefix=":" excuteType="excute">
        <actfilter>@checkParam == true</actfilter>
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    insert into wod_lw_comment (ID,cmt_userName,cmt_userEmail,cmt_userType,cmt_content,cmt_time,cmt_aid)
    values (:lw_newid,:name,:email,'ANONYMOUS_USER',:content,:lw_now,:aid)
    ]]>
        </sql>
      </sqlCommand>
      <resultConvertCommand id="result">
        <cdata valueName="checkParam" dataName="IsValid"></cdata>
        <cdata valueName="checkParam.errors" dataName="Messages"></cdata>
      </resultConvertCommand>
    </commands>
  </multiCommand>
  <multiCommand id="getcomment">
    <!--获取某文评论-->
    <commands>
      <assCommand id="pageTransferName">
        <typeName>wod.lwcms.web.pageTransfer, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getCommonTransfer</methodName>
      </assCommand>
      <sqlCommand id="totalCount" paramenterPrefix=":" excuteType="scalar">
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    select count(1) from wod_lw_comment
    where cmt_aid= :aid
    ]]>
        </sql>
      </sqlCommand>
      <assCommand id="startRowIndex">
        <typeName>wod.lwcms.dataaccess.pagerHelper, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getStartRowIndex</methodName>
      </assCommand>
      <assCommand id="endRowIndex">
        <typeName>wod.lwcms.dataaccess.pagerHelper, wod.lwcms.core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>getEndRowIndex</methodName>
      </assCommand>
      <sqlCommand id="pagedDr" paramenterPrefix=":" excuteType="datareader">
        <!--excuteType:datareader,excute,scalar-->
        <sql>
          <![CDATA[
    select top #endRowIndex ID,cmt_userName,cmt_userEmail,cmt_userType,cmt_content,cmt_time,cmt_aid from wod_lw_comment 
    where cmt_aid= :aid order by cmt_Time desc
    ]]>
        </sql>
      </sqlCommand>
      <assCommand id="cmtList">
        <typeName>wod.lwcms.dataaccess.ICommonDataAccess, wod.lwcms, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</typeName>
        <methodName>GetPagedComment</methodName>
      </assCommand>
    </commands>
  </multiCommand>
</commands>